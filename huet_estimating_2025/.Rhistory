c2 = "*In situ* observations (e.g., Tuck *et al.*, 2014)",
c3 = "Modelling from agricultural practices data (e.g., Lindner and Koch, 2022)",
c4 = "Modelling from specifications (e.g., Alliot *et al.*, 2021) ",
c5 = "BVIAS (this study)"
) %>%
tab_row_group(
label = md("**Addressing the main determinants of biodiversity loss related to agriculture**"),
rows = 2:7) %>%
row_group_order(groups = c(NA, "**Addressing the main determinants of biodiversity loss related to agriculture**"))
# https://gt.rstudio.com/reference/tab_row_group.html
#rm(tmp_table)
library(gt)
library(dplyr)
tmp_table <- data.frame(
c0 = c(NA,rep("Addressing the main determinants of biodiversity loss related to agriculture",6)),
c1= c(
"Explicit and operational definition of biodiversity",
"Land use",
"Climate change",
"Pollution",
"Based on measured data, biodiversity or practices at the farm level",
"Allow a default estimate on any food product",
"Validation based on biodiversity measurements"
),
c2 = c(
"Specific diversity (other studies present a plurality of indicators including abundance, diversity, presence of rare/endemic species, etc.).No systematic link with the sixth extinction crisis.",
"Consideration of landscape effects. No consideration of yields",
"Not taken into account",
"Taking into account all pollution",
"Yes (biodiversity), but without guarantee on the representativeness of the plots (sample size often small, difficulty in covering all productions)",
"No (too few measurements to differentiate each product)",
"Yes (intrinsically)"
),
c3 = c(
"Degradation of natural state (or risk of extinction of species for other studies)",
"No account taken of landscape effects. Consideration of yields",
"Not considered by Lindner *et al.* (2022), but considered by other models",
"Taking into account the main pollutions without effect size",
"Yes (practices), but often incomplete and without representativeness assurance (life cycle inventories)",
"Differentiates the main products, and the organic FQS",
"No"
),
c4 = c(
"Implied definition",
"Consideration of landscape effects. No consideration of yields",
"Not taken into account",
"Taking into account the main pollutions without effect size",
"No (specification)",
"Differentiates many FQSs, but not products between them",
"No"
),
c5 = c(
"Degradation of natural state",
"Consideration of landscape effects and yields",
"Not taken into account",
"Taking into account the main pollutions with effect size",
"Yes (practices, sample provided and representative: FADN, AC, LPIS)",
"Differentiates the main products, and FQSs sufficiently represented",
"Yes (consensus orders of magnitude in the literature)"
)
) %>%
# add columns for color
mutate(
#col1 = c(0,0,0,0,0,0,0,0),
col2 = c(2,2,1,3,3,1,3),
col3 = c(3,2,2,2,2,3,1),
col4 = c(2,2,1,2,1,2,1),
col5 = c(3,3,1,3,3,3,3)
)
tmp_palette = c("#FF9999","#FFCC99", "#99CC99")
tmp_table %>%
gt(groupname_col = "c0")
tmp_table %>%
gt(groupname_col = "c0") %>%
data_color(   columns = col2,
target_columns = c2,
rows = col2 >0,
method = "numeric",
palette = tmp_palette,
domain = c(1,3)
) %>%
data_color(   columns = col3,
target_columns = c3,
rows = col3 >0,
method = "numeric",
palette = tmp_palette,
domain = c(1,3)
) %>%
data_color(   columns = col4,
target_columns =c4,
rows = col4 >0,
method = "numeric",
palette = tmp_palette,
domain = c(1,3)
) %>%
data_color(   columns = col5,
target_columns = c5,
rows = col5 >0,
method = "numeric",
palette = tmp_palette,
domain = c(1,3)
) %>%
cols_hide(c0,col2:col5)
tmp_table <- data.frame(
c0 = c("",rep("Addressing the main determinants of biodiversity loss related to agriculture",6)),
c1= c(
"Explicit and operational definition of biodiversity",
"Land use",
"Climate change",
"Pollution",
"Based on measured data, biodiversity or practices at the farm level",
"Allow a default estimate on any food product",
"Validation based on biodiversity measurements"
),
c2 = c(
"Specific diversity (other studies present a plurality of indicators including abundance, diversity, presence of rare/endemic species, etc.).No systematic link with the sixth extinction crisis.",
"Consideration of landscape effects. No consideration of yields",
"Not taken into account",
"Taking into account all pollution",
"Yes (biodiversity), but without guarantee on the representativeness of the plots (sample size often small, difficulty in covering all productions)",
"No (too few measurements to differentiate each product)",
"Yes (intrinsically)"
),
c3 = c(
"Degradation of natural state (or risk of extinction of species for other studies)",
"No account taken of landscape effects. Consideration of yields",
"Not considered by Lindner *et al.* (2022), but considered by other models",
"Taking into account the main pollutions without effect size",
"Yes (practices), but often incomplete and without representativeness assurance (life cycle inventories)",
"Differentiates the main products, and the organic FQS",
"No"
),
c4 = c(
"Implied definition",
"Consideration of landscape effects. No consideration of yields",
"Not taken into account",
"Taking into account the main pollutions without effect size",
"No (specification)",
"Differentiates many FQSs, but not products between them",
"No"
),
c5 = c(
"Degradation of natural state",
"Consideration of landscape effects and yields",
"Not taken into account",
"Taking into account the main pollutions with effect size",
"Yes (practices, sample provided and representative: FADN, AC, LPIS)",
"Differentiates the main products, and FQSs sufficiently represented",
"Yes (consensus orders of magnitude in the literature)"
)
) %>%
# add columns for color
mutate(
#col1 = c(0,0,0,0,0,0,0,0),
col2 = c(2,2,1,3,3,1,3),
col3 = c(3,2,2,2,2,3,1),
col4 = c(2,2,1,2,1,2,1),
col5 = c(3,3,1,3,3,3,3)
)
tmp_palette = c("#FF9999","#FFCC99", "#99CC99")
library(gt)
library(dplyr)
tmp_table <- data.frame(
c0 = c("",rep("Addressing the main determinants of biodiversity loss related to agriculture",6)),
c1= c(
"Explicit and operational definition of biodiversity",
"Land use",
"Climate change",
"Pollution",
"Based on measured data, biodiversity or practices at the farm level",
"Allow a default estimate on any food product",
"Validation based on biodiversity measurements"
),
c2 = c(
"Specific diversity (other studies present a plurality of indicators including abundance, diversity, presence of rare/endemic species, etc.).No systematic link with the sixth extinction crisis.",
"Consideration of landscape effects. No consideration of yields",
"Not taken into account",
"Taking into account all pollution",
"Yes (biodiversity), but without guarantee on the representativeness of the plots (sample size often small, difficulty in covering all productions)",
"No (too few measurements to differentiate each product)",
"Yes (intrinsically)"
),
c3 = c(
"Degradation of natural state (or risk of extinction of species for other studies)",
"No account taken of landscape effects. Consideration of yields",
"Not considered by Lindner *et al.* (2022), but considered by other models",
"Taking into account the main pollutions without effect size",
"Yes (practices), but often incomplete and without representativeness assurance (life cycle inventories)",
"Differentiates the main products, and the organic FQS",
"No"
),
c4 = c(
"Implied definition",
"Consideration of landscape effects. No consideration of yields",
"Not taken into account",
"Taking into account the main pollutions without effect size",
"No (specification)",
"Differentiates many FQSs, but not products between them",
"No"
),
c5 = c(
"Degradation of natural state",
"Consideration of landscape effects and yields",
"Not taken into account",
"Taking into account the main pollutions with effect size",
"Yes (practices, sample provided and representative: FADN, AC, LPIS)",
"Differentiates the main products, and FQSs sufficiently represented",
"Yes (consensus orders of magnitude in the literature)"
)
) %>%
# add columns for color
mutate(
#col1 = c(0,0,0,0,0,0,0,0),
col2 = c(2,2,1,3,3,1,3),
col3 = c(3,2,2,2,2,3,1),
col4 = c(2,2,1,2,1,2,1),
col5 = c(3,3,1,3,3,3,3)
)
tmp_palette = c("#FF9999","#FFCC99", "#99CC99")
tmp_table %>%
gt(groupname_col = "c0") %>%
data_color(   columns = col2,
target_columns = c2,
rows = col2 >0,
method = "numeric",
palette = tmp_palette,
domain = c(1,3)
) %>%
data_color(   columns = col3,
target_columns = c3,
rows = col3 >0,
method = "numeric",
palette = tmp_palette,
domain = c(1,3)
) %>%
data_color(   columns = col4,
target_columns =c4,
rows = col4 >0,
method = "numeric",
palette = tmp_palette,
domain = c(1,3)
) %>%
data_color(   columns = col5,
target_columns = c5,
rows = col5 >0,
method = "numeric",
palette = tmp_palette,
domain = c(1,3)
) %>%
cols_hide(col2:col5) %>%
cols_label(
c1 = "",
c2 = "*In situ* observations (e.g., Tuck *et al.*, 2014)",
c3 = "Modelling from agricultural practices data (e.g., Lindner and Koch, 2022)",
c4 = "Modelling from specifications (e.g., Alliot *et al.*, 2021) ",
c5 = "BVIAS (this study)"
)
# https://gt.rstudio.com/reference/tab_row_group.html
#rm(tmp_table)
tmp_data <- read.csv("../CASD_export/tmp_data_RICA_RA_SIQO_summary.csv")
View(tmp_data)
tmp_table <- tmp_data %>%
rename(
OTEFDD = "OTEX",
FQS = "Label",
IDENT = "Nombre de fermes",
crop_area_ha = "Surface cultivée (ha)",
grassland_area_ha = "Surface en prairie permanente (ha)",
nb_dairy_cow = "Effectif de vaches laitières (nombre de tête)",
wheat_yield_kg_ha = "Rendement en blé (kg/ha)",
milk_yield_kg_cow = "Rendement en lait (L/vache)"
)
tmp_table <- tmp_data %>%
tmp_table <- tmp_data %>%
pivot_longer(cols = !c(OTEFDD,FQS),
names_to = "Variable",
values_to = "value")
tmp_table <- tmp_data %>%
pivot_longer(cols = !c(OTEFDD,FQS),
names_to = "Variable",
values_to = "value") %>%
mutate(
Variable = case_when(
Variable == "IDENT" ~ "Nombre de fermes",
Variable == crop_area_ha ~ "Surface cultivée (ha)",
Variable == grassland_area_ha ~ "Surface en prairie permanente (ha)",
Variable == nb_dairy_cow ~ "Effectif de vaches laitières (nombre de tête)",
Variable == wheat_yield_kg_ha ~ "Rendement en blé (kg/ha)",
Variable == milk_yield_kg_cow ~ "Rendement en lait (L/vache)"
)
)
View(tmp_table)
tmp_table <- tmp_data %>%
pivot_longer(cols = !c(OTEFDD,FQS),
names_to = "Variable",
values_to = "value") %>%
mutate(
Variable = case_when(
Variable == "IDENT" ~ "Nombre de fermes",
Variable == "crop_area_ha" ~ "Surface cultivée (ha)",
Variable == "grassland_area_ha" ~ "Surface en prairie permanente (ha)",
Variable == "nb_dairy_cow" ~ "Effectif de vaches laitières (nombre de tête)",
Variable == "wheat_yield_kg_ha" ~ "Rendement en blé (kg/ha)",
Variable == "milk_yield_kg_cow" ~ "Rendement en lait (L/vache)"
)
)
tmp_table <- tmp_data %>%
pivot_longer(cols = !c(OTEFDD,FQS),
names_to = "Variable",
values_to = "value") %>%
mutate(
Variable = case_when(
Variable == "IDENT" ~ "Nombre de fermes",
Variable == "crop_area_ha" ~ "Surface cultivée (ha)",
Variable == "grassland_area_ha" ~ "Surface en prairie permanente (ha)",
Variable == "nb_dairy_cow" ~ "Effectif de vaches laitières (nombre de tête)",
Variable == "wheat_yield_kg_ha" ~ "Rendement en blé (kg/ha)",
Variable == "milk_yield_kg_cow" ~ "Rendement en lait (L/vache)"
)
) %>%
pivot_wider(
id_cols = c(OTEFDD,Variable),
names_from = FQS,
values_from = value
)
tmp_table %>%
gt()
tmp_table %>%
gt(groupname_col = OTEFDD)
tmp_table %>%
gt(groupname_col = OTEFDD)
tmp_table %>%
gt(groupname_col = "OTEFDD")
tmp_table %>%
gt() %>%
cols_label(
OTEFDD = "OTEX"
) %>%
# groups
mutate(OTEX = ifelse(row_number() == 1,
as.character(OTEX), ""),
.by = OTEX)
tmp_table %>%
gt() %>%
# groups
mutate(OTEFDD = ifelse(row_number() == 1,
as.character(OTEFDD), ""),
.by = OTEFDD)%>%
cols_label(
OTEFDD = "OTEX"
)
tmp_table %>%
# groups
mutate(OTEFDD = ifelse(row_number() == 1,
as.character(OTEFDD), ""),
.by = OTEFDD) %>%
gt() %>%
cols_label(
OTEFDD = "OTEX"
)
tmp_table %>%
# groups
mutate(OTEFDD = ifelse(row_number() == 1,
as.character(OTEFDD), ""),
.by = OTEFDD) %>%
select(OTEFDD,Variable,Conventionnel,AB,SIQO)
gt() %>%
cols_label(
OTEFDD = "OTEX",
AB = "Agriculture Biologique",
SIQO = "Autres SIQO"
)
tmp_table %>%
# groups
mutate(OTEFDD = ifelse(row_number() == 1,
as.character(OTEFDD), ""),
.by = OTEFDD) %>%
select(OTEFDD,Variable,Conventionnel,AB,SIQO) %>%
gt() %>%
cols_label(
OTEFDD = "OTEX",
AB = "Agriculture Biologique",
SIQO = "Autres SIQO"
)
tmp_table %>%
# groups
mutate(OTEFDD = ifelse(row_number() == 1,
as.character(OTEFDD), ""),
.by = OTEFDD) %>%
select(OTEFDD,Variable,Conventionnel,AB,SIQO) %>%
gt() %>%
cols_label(
OTEFDD = "OTEX",
AB = "Agriculture Biologique",
SIQO = "Autres SIQO"
) %>%
# replace NAs
sub_missing(missing_text = "-")
library(gt)
library(dplyr)
tmp_data <- read.csv("../CASD_export/tmp_data_RICA_RA_SIQO_summary.csv")
tmp_table <- tmp_data %>%
pivot_longer(cols = !c(OTEFDD,FQS),
names_to = "Variable",
values_to = "value") %>%
mutate(
Variable = case_when(
Variable == "IDENT" ~ "Nombre de fermes",
Variable == "crop_area_ha" ~ "Surface cultivée (ha)",
Variable == "grassland_area_ha" ~ "Surface en prairie permanente (ha)",
Variable == "nb_dairy_cow" ~ "Effectif de vaches laitières (nombre de tête)",
Variable == "wheat_yield_kg_ha" ~ "Rendement en blé (kg/ha)",
Variable == "milk_yield_kg_cow" ~ "Rendement en lait (L/vache)"
)
) %>%
pivot_wider(
id_cols = c(OTEFDD,Variable),
names_from = FQS,
values_from = value
)
tmp_table %>%
# groups
mutate(OTEFDD = ifelse(row_number() == 1,
as.character(OTEFDD), ""),
.by = OTEFDD) %>%
select(OTEFDD,Variable,Conventionnel,AB,SIQO) %>%
gt() %>%
cols_label(
OTEFDD = "OTEX",
AB = "Agriculture Biologique",
SIQO = "Autres SIQO"
) %>%
# replace NAs
sub_missing(missing_text = "-")
library(gt)
library(dplyr)
tmp_data <- read.csv("../CASD_export/tmp_data_RICA_RA_SIQO_summary.csv")
tmp_table <- tmp_data %>%
pivot_longer(cols = !c(OTEFDD,FQS),
names_to = "Variable",
values_to = "value") %>%
mutate(
Variable = case_when(
Variable == "IDENT" ~ "Nombre de fermes",
Variable == "crop_area_ha" ~ "Surface cultivée (ha)",
Variable == "grassland_area_ha" ~ "Surface en prairie permanente (ha)",
Variable == "nb_dairy_cow" ~ "Effectif de vaches laitières (nombre de tête)",
Variable == "wheat_yield_kg_ha" ~ "Rendement en blé (kg/ha)",
Variable == "milk_yield_kg_cow" ~ "Rendement en lait (L/vache)"
)
) %>%
pivot_wider(
id_cols = c(OTEFDD,Variable),
names_from = FQS,
values_from = value
)
tmp_table %>%
# groups
mutate(OTEFDD = ifelse(row_number() == 1,
as.character(OTEFDD), ""),
.by = OTEFDD) %>%
select(OTEFDD,Variable,Conventionnel,AB,SIQO) %>%
gt() %>%
cols_label(
OTEFDD = "OTEX",
AB = "Agriculture Biologique",
SIQO = "Autres SIQO"
) %>%
# replace NAs
sub_missing(missing_text = "-") %>%
# format numbers
fmt_auto()
library(gt)
library(dplyr)
library(tidyr)
tmp_data <- read.csv("../CASD_export/tmp_data_RICA_RA_SIQO_summary.csv")
tmp_table <- tmp_data %>%
pivot_longer(cols = !c(OTEFDD,FQS),
names_to = "Variable",
values_to = "value") %>%
mutate(
Variable = case_when(
Variable == "IDENT" ~ "Nombre de fermes",
Variable == "crop_area_ha" ~ "Surface cultivée (ha)",
Variable == "grassland_area_ha" ~ "Surface en prairie permanente (ha)",
Variable == "nb_dairy_cow" ~ "Effectif de vaches laitières (nombre de tête)",
Variable == "wheat_yield_kg_ha" ~ "Rendement en blé (kg/ha)",
Variable == "milk_yield_kg_cow" ~ "Rendement en lait (L/vache)"
)
) %>%
pivot_wider(
id_cols = c(OTEFDD,Variable),
names_from = FQS,
values_from = value
)
tmp_table %>%
# groups
mutate(OTEFDD = ifelse(row_number() == 1,
as.character(OTEFDD), ""),
.by = OTEFDD) %>%
select(OTEFDD,Variable,Conventionnel,AB,SIQO) %>%
gt() %>%
cols_label(
OTEFDD = "OTEX",
AB = "Agriculture Biologique",
SIQO = "Autres SIQO"
) %>%
# replace NAs
sub_missing(missing_text = "-") %>%
# format numbers
fmt_auto()
gc()
